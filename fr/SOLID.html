
<!DOCTYPE HTML>
<html lang="fr" >
    <head>
        <meta charset="UTF-8">
        <title>SOLID · Clean Code TypeScript</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="TESTING.html" />
    
    
    <link rel="prev" href="CLASSES.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Tapez pour rechercher" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="VARIABLES.html">
            
                <a href="VARIABLES.html">
            
                    
                    Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="FUNCTIONS.html">
            
                <a href="FUNCTIONS.html">
            
                    
                    Fonctions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="OBJECTS-DATA.html">
            
                <a href="OBJECTS-DATA.html">
            
                    
                    Objets et Structures de Données
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="CLASSES.html">
            
                <a href="CLASSES.html">
            
                    
                    Classes
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6" data-path="SOLID.html">
            
                <a href="SOLID.html">
            
                    
                    SOLID
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="TESTING.html">
            
                <a href="TESTING.html">
            
                    
                    Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="CONCURRENCY.html">
            
                <a href="CONCURRENCY.html">
            
                    
                    Opérations Concurrentes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="ERROR-HANDLING.html">
            
                <a href="ERROR-HANDLING.html">
            
                    
                    Gestion des erreurs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="FORMATTING.html">
            
                <a href="FORMATTING.html">
            
                    
                    Formatage du Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="COMMENTS.html">
            
                <a href="COMMENTS.html">
            
                    
                    Commentaires
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="TRANSLATIONS.html">
            
                <a href="TRANSLATIONS.html">
            
                    
                    Traductions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="LICENSE.html">
            
                <a href="LICENSE.html">
            
                    
                    Licence
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Publié avec HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >SOLID</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="solid">SOLID</h2>
<h3 id="principe-de-responsabilité-unique-ou-single-responsibility-principle-srp">Principe de Responsabilité Unique ou &quot;Single Responsibility Principle (SRP)&quot;</h3>
<p>Comme indiqué dans Clean Code, &quot;Il ne devrait jamais y avoir plus d&apos;une raison
pour qu&apos;une classe change&quot;. Il est tentant d&apos;emballer une classe avec beaucoup
de fonctionnalités, comme lorsque vous ne pouvez emporter qu&apos;une seule valise
pendant votre vol. Le problème avec cela est que votre classe ne sera pas
conceptuellement cohérente et cela lui donnera de nombreuses raisons de changer.
Il est important de minimiser le nombre de fois que vous devez changer de classe.
C&apos;est important car si trop de fonctionnalités sont dans une classe et que vous
en modifiez une partie, il peut être difficile de comprendre comment cela affectera
les autres modules dépendants de votre base de code.</p>
<p><strong>Mal:</strong></p>
<pre><code class="lang-ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserSettings</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> user: User</span>)</span> {
  }

  <span class="hljs-function"><span class="hljs-title">changeSettings</span>(<span class="hljs-params">settings: UserSettings</span>)</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.verifyCredentials()) {
      <span class="hljs-comment">// ...</span>
    }
  }

  <span class="hljs-function"><span class="hljs-title">verifyCredentials</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p><strong>Bien:</strong></p>
<pre><code class="lang-ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserAuth</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> user: User</span>)</span> {
  }

  <span class="hljs-function"><span class="hljs-title">verifyCredentials</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }
}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserSettings</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> auth: UserAuth;

  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> user: User</span>)</span> {
    <span class="hljs-built_in">this</span>.auth = <span class="hljs-keyword">new</span> UserAuth(user);
  }

  <span class="hljs-function"><span class="hljs-title">changeSettings</span>(<span class="hljs-params">settings: UserSettings</span>)</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.auth.verifyCredentials()) {
      <span class="hljs-comment">// ...</span>
    }
  }
}
</code></pre>
<h3 id="principe-ouvertfermé-ou-openclosed-principle-ocp">Principe ouvert/fermé ou &quot;Open/Closed Principle (OCP)&quot;</h3>
<p>Comme l&apos;a déclaré Bertrand Meyer, &quot;les entités logicielles (classes, modules,
fonctions, etc.) devraient être ouvertes pour extension, mais fermées pour modification.&quot;
Mais qu&apos;est-ce que cela signifie? Ce principe stipule essentiellement que vous
devez autoriser les utilisateurs à ajouter de nouvelles fonctionnalités sans modifier le code existant.</p>
<p><strong>Mal:</strong></p>
<pre><code class="lang-ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AjaxAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Adapter</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">super</span>();
  }

  <span class="hljs-comment">// ...</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NodeAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Adapter</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">super</span>();
  }

  <span class="hljs-comment">// ...</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpRequester</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> adapter: Adapter</span>)</span> {
  }

  <span class="hljs-keyword">async</span> fetch&lt;T&gt;(url: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.adapter <span class="hljs-keyword">instanceof</span> AjaxAdapter) {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> makeAjaxCall&lt;T&gt;(url);
      <span class="hljs-comment">// transform response and return</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.adapter <span class="hljs-keyword">instanceof</span> NodeAdapter) {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> makeHttpCall&lt;T&gt;(url);
      <span class="hljs-comment">// transform response and return</span>
    }
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeAjaxCall</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-comment">// request and return promise</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeHttpCall</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>): <span class="hljs-title">Promise</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
  <span class="hljs-comment">// request and return promise</span>
}
</code></pre>
<p><strong>Bien:</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Adapter</span> </span>{
  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">async</span> request&lt;T&gt;(url: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt;;

  <span class="hljs-comment">// code shared to subclasses ...</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AjaxAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Adapter</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">super</span>();
  }

  <span class="hljs-keyword">async</span> request&lt;T&gt;(url: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt;{
    <span class="hljs-comment">// request and return promise</span>
  }

  <span class="hljs-comment">// ...</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NodeAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Adapter</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-built_in">super</span>();
  }

  <span class="hljs-keyword">async</span> request&lt;T&gt;(url: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt;{
    <span class="hljs-comment">// request and return promise</span>
  }

  <span class="hljs-comment">// ...</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpRequester</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> adapter: Adapter</span>)</span> {
  }

  <span class="hljs-keyword">async</span> fetch&lt;T&gt;(url: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.adapter.request&lt;T&gt;(url);
    <span class="hljs-comment">// transform response and return</span>
  }
}
</code></pre>
<h3 id="principe-de-substitution-de-liskov-ou-liskov-substitution-principle-lsp">Principe de substitution de Liskov ou &quot;Liskov Substitution Principle (LSP)&quot;</h3>
<p>C&apos;est un terme effrayant pour un concept très simple. Il est formellement défini
comme &quot;Si S est un sous-type de T, alors les objets de type T peuvent être remplacés
par des objets de type S (c&apos;est-à-dire que les objets de type S peuvent remplacer
des objets de type T) sans altérer aucune des attributs souhaitables de ce
programme (correction, tâche effectuée, etc.).&quot; C&apos;est une définition encore plus effrayante.</p>
<p>La meilleure explication est que si vous avez une classe parent et une classe enfant,
la classe parent et la classe enfant peuvent être utilisées de manière interchangeable
sans obtenir de résultats incorrects. Cela peut encore prêter à confusion, alors
jetons un coup d&apos;œil à l&apos;exemple classique de Square-Rectangle. Mathématiquement,
un carré est un rectangle, mais si vous le modélisez en utilisant la relation &quot;is-a&quot;
via l&apos;héritage, vous rencontrez rapidement des problèmes.</p>
<p><strong>Mal:</strong></p>
<pre><code class="lang-ts"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">protected</span> width: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>,
    <span class="hljs-keyword">protected</span> height: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></span>)</span> {

  }

  setColor(color: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">this</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params">area: <span class="hljs-built_in">number</span></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }

  setWidth(width: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">this</span> {
    <span class="hljs-built_in">this</span>.width = width;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
  }

  setHeight(height: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">this</span> {
    <span class="hljs-built_in">this</span>.height = height;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
  }

  getArea(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.width * <span class="hljs-built_in">this</span>.height;
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Rectangle</span> </span>{
  setWidth(width: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">this</span> {
    <span class="hljs-built_in">this</span>.width = width;
    <span class="hljs-built_in">this</span>.height = width;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
  }

  setHeight(height: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">this</span> {
    <span class="hljs-built_in">this</span>.width = height;
    <span class="hljs-built_in">this</span>.height = height;
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderLargeRectangles</span>(<span class="hljs-params">rectangles: Rectangle[]</span>) </span>{
  rectangles.forEach(<span class="hljs-function">(<span class="hljs-params">rectangle</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> area = rectangle
      .setWidth(<span class="hljs-number">4</span>)
      .setHeight(<span class="hljs-number">5</span>)
      .getArea(); <span class="hljs-comment">// BAD: Returns 25 for Square. Should be 20.</span>
    rectangle.render(area);
  });
}

<span class="hljs-keyword">const</span> rectangles = [<span class="hljs-keyword">new</span> Rectangle(), <span class="hljs-keyword">new</span> Rectangle(), <span class="hljs-keyword">new</span> Square()];
renderLargeRectangles(rectangles);
</code></pre>
<p><strong>Bien:</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shape</span> </span>{
  setColor(color: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">this</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params">area: <span class="hljs-built_in">number</span></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-keyword">abstract</span> getArea(): <span class="hljs-built_in">number</span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> width = <span class="hljs-number">0</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> height = <span class="hljs-number">0</span></span>)</span> {
    <span class="hljs-built_in">super</span>();
  }

  getArea(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.width * <span class="hljs-built_in">this</span>.height;
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Shape</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> length: <span class="hljs-built_in">number</span></span>)</span> {
    <span class="hljs-built_in">super</span>();
  }

  getArea(): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.length * <span class="hljs-built_in">this</span>.length;
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">renderLargeShapes</span>(<span class="hljs-params">shapes: Shape[]</span>) </span>{
  shapes.forEach(<span class="hljs-function">(<span class="hljs-params">shape</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> area = shape.getArea();
    shape.render(area);
  });
}

<span class="hljs-keyword">const</span> shapes = [<span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>), <span class="hljs-keyword">new</span> Rectangle(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>), <span class="hljs-keyword">new</span> Square(<span class="hljs-number">5</span>)];
renderLargeShapes(shapes);
</code></pre>
<h3 id="principe-de-ségrégation-dinterface-ou-interface-segregation-principle-isp">Principe de ségrégation d&apos;interface ou &quot;Interface Segregation Principle (ISP)&quot;</h3>
<p>L&apos;ISP déclare que &quot;les clients ne devraient pas être obligés de dépendre d&apos;interfaces
qu&apos;ils n&apos;utilisent pas.&quot;. Ce principe est très lié au principe de responsabilité unique.
Ce que cela signifie vraiment, c&apos;est que vous devez toujours concevoir vos abstractions
de manière à ce que les clients qui utilisent les méthodes exposées n&apos;obtiennent
pas tout le gâteau à la place. Cela implique également d&apos;imposer aux clients la
charge de mettre en œuvre des méthodes dont ils n&apos;ont pas réellement besoin.</p>
<p><strong>Mal:</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">interface</span> SmartPrinter {
  print();
  fax();
  scan();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AllInOnePrinter</span> <span class="hljs-title">implements</span> <span class="hljs-title">SmartPrinter</span> </span>{
  <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-function"><span class="hljs-title">fax</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-function"><span class="hljs-title">scan</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EconomicPrinter</span> <span class="hljs-title">implements</span> <span class="hljs-title">SmartPrinter</span> </span>{
  <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-function"><span class="hljs-title">fax</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;Fax not supported.&apos;</span>);
  }

  <span class="hljs-function"><span class="hljs-title">scan</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&apos;Scan not supported.&apos;</span>);
  }
}
</code></pre>
<p><strong>Bien:</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">interface</span> Printer {
  print();
}

<span class="hljs-keyword">interface</span> Fax {
  fax();
}

<span class="hljs-keyword">interface</span> Scanner {
  scan();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AllInOnePrinter</span> <span class="hljs-title">implements</span> <span class="hljs-title">Printer</span>, <span class="hljs-title">Fax</span>, <span class="hljs-title">Scanner</span> </span>{
  <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-function"><span class="hljs-title">fax</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-function"><span class="hljs-title">scan</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EconomicPrinter</span> <span class="hljs-title">implements</span> <span class="hljs-title">Printer</span> </span>{
  <span class="hljs-function"><span class="hljs-title">print</span>(<span class="hljs-params"></span>)</span> {
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<h3 id="principe-dinversion-de-dépendance-ou-dependency-inversion-principle-dip">Principe d&apos;inversion de dépendance ou &quot;Dependency Inversion Principle (DIP)&quot;</h3>
<p>Ce principe énonce deux choses essentielles:</p>
<ol>
<li>Les modules de haut niveau ne doivent pas dépendre de modules de bas niveau.
Les deux devraient dépendre d&apos;abstractions.</li>
<li>Les abstractions ne devraient pas dépendre des détails. Les détails doivent
dépendre des abstractions.</li>
</ol>
<p>Cela peut être difficile à comprendre au début, mais si vous avez travaillé avec
Angular, vous avez vu une implémentation de ce principe sous la forme d&apos;une
injection de dépendance (DI). Bien qu&apos;il ne s&apos;agisse pas de concepts identiques,
DIP empêche les modules de haut niveau de connaître les détails de ses modules de
bas niveau et de les configurer. Il peut y parvenir grâce à DI. Un énorme avantage
de ceci est qu&apos;il réduit le couplage entre les modules. Le couplage est un très
mauvais schéma de développement car il rend votre code difficile à refactoriser.</p>
<p>Le DIP est généralement obtenu en utilisant un conteneur d&apos;inversion de contrôle
(IoC). Un exemple de conteneur IoC puissant pour TypeScript est
<a href="https://www.npmjs.com/package/inversify" target="_blank">InversifyJs</a>.</p>
<p><strong>Mal:</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">import</span> { readFile <span class="hljs-keyword">as</span> readFileCb } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;fs&apos;</span>;
<span class="hljs-keyword">import</span> { promisify } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;util&apos;</span>;

<span class="hljs-keyword">const</span> readFile = promisify(readFileCb);

<span class="hljs-keyword">type</span> ReportData = {
  <span class="hljs-comment">// ..</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XmlFormatter</span> </span>{
  parse&lt;T&gt;(content: <span class="hljs-built_in">string</span>): T {
    <span class="hljs-comment">// Converts an XML string to an object T</span>
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReportReader</span> </span>{

  <span class="hljs-comment">// BAD: We have created a dependency on a specific request implementation.</span>
  <span class="hljs-comment">// We should just have ReportReader depend on a parse method: `parse`</span>
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> formatter = <span class="hljs-keyword">new</span> XmlFormatter();

  <span class="hljs-keyword">async</span> read(path: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;ReportData&gt; {
    <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> readFile(path, <span class="hljs-string">&apos;UTF8&apos;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.formatter.parse&lt;ReportData&gt;(text);
  }
}

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> ReportReader();
<span class="hljs-keyword">await</span> report = <span class="hljs-keyword">await</span> reader.read(<span class="hljs-string">&apos;report.xml&apos;</span>);
</code></pre>
<p><strong>Bien:</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">import</span> { readFile <span class="hljs-keyword">as</span> readFileCb } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;fs&apos;</span>;
<span class="hljs-keyword">import</span> { promisify } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;util&apos;</span>;

<span class="hljs-keyword">const</span> readFile = promisify(readFileCb);

<span class="hljs-keyword">type</span> ReportData = {
  <span class="hljs-comment">// ..</span>
}

<span class="hljs-keyword">interface</span> Formatter {
  parse&lt;T&gt;(content: <span class="hljs-built_in">string</span>): T;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XmlFormatter</span> <span class="hljs-title">implements</span> <span class="hljs-title">Formatter</span> </span>{
  parse&lt;T&gt;(content: <span class="hljs-built_in">string</span>): T {
    <span class="hljs-comment">// Converts an XML string to an object T</span>
  }
}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JsonFormatter</span> <span class="hljs-title">implements</span> <span class="hljs-title">Formatter</span> </span>{
  parse&lt;T&gt;(content: <span class="hljs-built_in">string</span>): T {
    <span class="hljs-comment">// Converts a JSON string to an object T</span>
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReportReader</span> </span>{
  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> formatter: Formatter</span>)</span> {
  }

  <span class="hljs-keyword">async</span> read(path: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">Promise</span>&lt;ReportData&gt; {
    <span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> readFile(path, <span class="hljs-string">&apos;UTF8&apos;</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.formatter.parse&lt;ReportData&gt;(text);
  }
}

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> ReportReader(<span class="hljs-keyword">new</span> XmlFormatter());
<span class="hljs-keyword">await</span> report = <span class="hljs-keyword">await</span> reader.read(<span class="hljs-string">&apos;report.xml&apos;</span>);

<span class="hljs-comment">// or if we had to read a json report</span>
<span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> ReportReader(<span class="hljs-keyword">new</span> JsonFormatter());
<span class="hljs-keyword">await</span> report = <span class="hljs-keyword">await</span> reader.read(<span class="hljs-string">&apos;report.json&apos;</span>);
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="CLASSES.html" class="navigation navigation-prev " aria-label="Previous page: Classes">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="TESTING.html" class="navigation navigation-next " aria-label="Next page: Tests">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"SOLID","level":"1.6","depth":1,"next":{"title":"Tests","level":"1.7","depth":1,"path":"TESTING.md","ref":"./TESTING.md","articles":[]},"previous":{"title":"Classes","level":"1.5","depth":1,"path":"CLASSES.md","ref":"./CLASSES.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Clean Code TypeScript","language":"fr","gitbook":"*"},"file":{"path":"SOLID.md","mtime":"2022-10-28T20:05:06.106Z","type":"markdown"},"gitbook":{"version":"4.0.0","time":"2022-10-28T20:05:13.400Z"},"basePath":".","book":{"language":"fr"}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

